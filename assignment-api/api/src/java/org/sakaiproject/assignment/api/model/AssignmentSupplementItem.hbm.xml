<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="org.sakaiproject.assignment.api.model" default-lazy="false">
	<class name="AssignmentModelAnswerItem" table="ASSIGN_MODEL_ANS_ITEM_T" >
       
        <id name="Id" column="ID" type="long">
					<generator class="native">
						<param name="sequence">ASSIGN_MODEL_ANSWER_S</param>
					</generator>
		</id>
	    
		<property name="assignmentId" type="string" not-null="true">
            <column name="ASSIGNMENT_ID"/>
        </property>
        
        <property name="text" type="string" not-null="false">
            <column name="TEXT"/>
        </property>
        
        <property name="showTo" type="integer" not-null="false">
            <column name="SHOW_TO"/>
        </property>
 
       <set name="attachmentSet" lazy="true" inverse="true" cascade="none">
	        <key column="ASN_MODEL_ANSWER_ID"/>                        
	        <one-to-many class="org.sakaiproject.assignment.api.model.AssignmentModelAnswerAttachment"/>            
    	</set>
    </class>
    
    <class name="AssignmentNoteItem" table="ASSIGN_NOTE_ITEM_T" >
       
        <id name="Id" column="ID" type="long">
					<generator class="native">
						<param name="sequence">ASSIGN_NOTE_S</param>
					</generator>
		</id>
	    
		<property name="assignmentId" type="string" not-null="true">
            <column name="ASSIGNMENT_ID"/>
        </property>
        
        <property name="note" type="string" not-null="false">
            <column name="NOTE"/>
        </property>
        
        <property name="shareWith" type="integer" not-null="false">
            <column name="SHARE_WITH"/>
        </property>
    </class>
    
    <class name="AssignmentAllPurposeItem" table="ASSIGN_ALL_PURPOSE_ITEM_T" >
       
        <id name="Id" column="ID" type="long">
					<generator class="native">
						<param name="sequence">ASSIGN_ALL_PURPOSE_S</param>
					</generator>
		</id>
	    
		<property name="assignmentId" type="string" not-null="true">
            <column name="ASSIGNMENT_ID"/>
        </property>
        
        <property name="title" type="string" not-null="false">
            <column name="TITLE"/>
        </property>
        
        <property name="instruction" type="text" not-null="false">
            <column name="INSTRUCTION"/>
        </property>
        
        <!-- item viewable open time  -->        
        <property name="showStartDate" type="java.util.Date" not-null="true" >
            <column name="SHOW_START_DATE" />
        </property>
        
        <!-- item viewable end time  -->
        <property name="showEndDate" type="java.util.Date" not-null="true" >
            <column name="SHOW_END_DATE" />
        </property>
        
        <property name="hide" type="java.lang.Boolean" not-null="true">
            <column name="HIDE" />
        </property>
    </class>
    
    <query name = "findModelAnswerByAssignmentId">
			<![CDATA[
			from AssignmentModelAnswerItem m
			where m.assignmentId = :id
		]]>
	</query>
	
	<query name = "findNoteItemByAssignmentId">
			<![CDATA[
			from AssignmentNoteItem m
			where m.assignmentId = :id
		]]>
	</query>
	
	<query name = "findAllPurposeItemByAssignmentId">
			<![CDATA[
			from AssignmentAllPurposeItem m
			where m.assignmentId = :id
		]]>
	</query>
    
</hibernate-mapping>