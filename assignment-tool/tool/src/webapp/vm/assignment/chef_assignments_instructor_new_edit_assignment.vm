##<!-- $Header: Exp $ -->
## Assignments - Instructor new Assignment view
<script type="text/javascript" src="/library/js/jquery.js"></script>
<script type="text/javascript" src="/library/js/form.js"></script>
<script language="JavaScript" type="text/JavaScript">
$(document).ready(function(){ 
  $('.extraNode').hide();

    $("#selectExtra").change(function() 
    { 
        boxes_index = $("#selectExtra").val(); 
			  $('.extraNode').hide();
			  $('#' + boxes_index).fadeIn('slow');
				resizeFrame('grow');
    });
  ####################### for model answer panel ##############################
  $("#modelanswer_add").click(function() 
  {
  		$('.extraNode').hide();
			 $('#modelanswer').fadeIn('slow');
				resizeFrame('grow');
  });
 	$("#modelanswer_edit").click(function() 
  {
  		$('.extraNode').hide();
			 $('#modelanswer').fadeIn('slow');
				resizeFrame('grow');
  });
  $("#modelanswer_delete").click(function() 
  {
  		$('#modelanswer_text').val("");
  		$('#modelanswer_when').val("0");
  		$('.extraNode').hide();
				$('#modelanswer').hide();
				$("#selectExtra").val('1default');
				$("#hasModelAnswer").css('display', 'none');
				$("#noModelAnswer").css('display', 'block');
  		return true;
  });
  $("#modelanswer_save").click(function() 
  {
  	if ($('#modelanswer_text').val() == "")
  	{
  		alert('$tlang.getString("modelAnswer.alert.noText")');
  		return false;
  	}
  	else if ($('#modelanswer_when').val() == 0)
  	{
  		alert('$tlang.getString("modelAnswer.alert.noShowTo")');
  		return false;
  	}
  	else
  	{
  		$('.extraNode').hide();
				$('#modelanswer').hide();
				$("#hasModelAnswer").css('display', 'block');
				$("#noModelAnswer").css('display', 'none');
  		return true;
  	}
  });
  ## after the Cancel button for Model Answer is clicked, close the Model Answer panel 
  $('#modelanswer_cancel').click(function()
  {
  		$('.extraNode').hide();
				$('#modelanswer').hide();
				$("#selectExtra").val('1default');
  });
  ######################### for private notes panel ######################
  $("#note_add").click(function() 
  {
  		$('.extraNode').hide();
			 $('#note').fadeIn('slow');
				resizeFrame('grow');
  });
 	$("#note_edit").click(function() 
  {
  		$('.extraNode').hide();
			 $('#note').fadeIn('slow');
				resizeFrame('grow');
  });
  $("#note_save").click(function() 
  {
  	if ($('#note_text').val() == "")
  	{
  		alert('$tlang.getString("note.alert.noText")');
  		return false;
  	}
  	else if ($('#note_to').val() == 0)
  	{
  		alert('$tlang.getString("note.alert.noTo")');
  		return false;
  	}
  	else
  	{
  		$('.extraNode').hide();
				$('#note').hide();
				$("#hasNote").css('display', 'block');
				$("#noNote").css('display', 'none');
  		return true;
  	}
  });
  $('#note_cancel').click(function()
  {
  		$('.extraNode').hide();
				$('#note').hide();
  });
  ######################### for all purpose item panel ######################
  $("#allPurpose_add").click(function() 
  {
  		$('.extraNode').hide();
			 $('#allPurpose').fadeIn('slow');
				resizeFrame('grow');
  });
 	$("#allPurpose_edit").click(function() 
  {
  		$('.extraNode').hide();
			 $('#allPurpose').fadeIn('slow');
				resizeFrame('grow');
  });
  $("#allPurpose_save").click(function() 
  {
  	if ($('#allPurposeTitle').val() == "")
  	{
  		alert('$tlang.getString("allPurpose.alert.noTitle")');
  		return false;
  	}
  	else if ($('#allPurposeText').val() == 0)
  	{
  		alert('$tlang.getString("allPurpose.alert.noText")');
  		return false;
  	}
  	else
  	{
  		$('.extraNode').hide();
				$('#allPurpose').hide();
				$("#hasAllPurpose").css('display', 'block');
				$("#noAllPurpose").css('display', 'none');
  		return true;
  	}
  });
  $('#allPurpose_cancel').click(function()
  {
  		$('.extraNode').hide();
				$('#allPurpose').hide();
  });
  $("#allPurpose_showList").click(function() 
  {
  			$('.roleList').hide();
				resizeFrame('grow');
  });
  $("#allPurpose_hideList").click(function() 
  {
  			$('.roleList').hide();
				resizeFrame('grow');
  });
  
}); 
</script>	
<style type="text/css">
	.extraNode {
		border:1px solid #69d;
		padding: 0  1.5em 1em 1.5em;
		width:50%;


	}
	.extraNode legend{
		padding:0 .5em;
		color:#555
	}
	.roleList {
		listHier nolines hierItemBlockWrapper;
	}

</style>
<script type="text/javascript">
//this function needs jquery 1.1.2 or later - it resizes the parent iframe without bringing the scroll to the top
	function resizeFrame(updown) 
	{
		if (top.location != self.location) 	 {
			var frame = parent.document.getElementById(window.name);
		}	
			if( frame ) 
		{
			if(updown=='shrink')
			{
				var clientH = document.body.clientHeight - 30;
			}
			else
			{
				var clientH = document.body.clientHeight + 30;
			}
			$( frame ).height( clientH );
		} 
		else 
		{
			throw( "resizeFrame did not get the frame (using name=" + window.name + ")" );
		}
	}

<!--
    function SetMaxPoint(obj_option, obj_textfield)
    {
		if(obj_option.value==3)
		{ 
			obj_textfield.disabled = false;
			obj_textfield.style.backgroundColor = 'white';
			document.forms[0].new_assignment_grade_points.focus();
			obj_textfield.style.backgroundColor = '#ffe';
			document.getElementById('req-$name_GradePoints').style.display="inline";
		}
		else
		{ 
			obj_textfield.disabled = true;
			obj_textfield.style.backgroundColor = '#eee';
			document.getElementById('req-$name_GradePoints').style.display="none"
		}
	}

#*
## This function is deprecated
	function SetCloseDate(obj_checkbox, obj_1, obj_2, obj_3, obj_4, obj_5, obj_6)
	{
		if (obj_checkbox.checked)
		{
			obj_1.disabled = false;
			obj_2.disabled = false;
			obj_3.disabled = false;
			obj_4.disabled = false;
			obj_5.disabled = false;
			obj_6.disabled = false;
		}
		else
		{
			obj_1.disabled = true;
			obj_2.disabled = true;
			obj_3.disabled = true;
			obj_4.disabled = true;
			obj_5.disabled = true;
			obj_6.disabled = true;
		}
	}
*#
-->
</script>
<script type="text/javascript">
	focus_path = [ '$fField' ];
</script>
<div class="portletBody"  xmlns:wairole="http://www.w3.org/2005/01/wai-rdf/GUIRoleTaxonomy#" xmlns:aaa="http://www.w3.org/2005/07/aaa">
	<ul class="navIntraTool actionToolBar" role="menu">
		#if ($allowAddAssignment)
			<li class="firstToolBarItem" role="menuitem" aria-disabled="true">
				<span class="current">$!tlang.getString("new")</span>
			</li>
			<li role="menuitem">
				<span><a href="#" title = "$!tlang.getString('lisofass1')" onclick="javascript:document.newAssignmentForm.onsubmit();document.getElementById('option').value='view';document.getElementById('view').value='lisofass1';document.newAssignmentForm.submit();return false;">$!tlang.getString("lisofass1")</a></span>
			</li>	
			#if ($withGrade && $!allowGradeSubmission)
				<li  role="menuitem">
					<span><a href="#" title="$!tlang.getString('gen.grarep')" onclick="javascript:document.newAssignmentForm.onsubmit();document.getElementById('option').value='view';document.getElementById('view').value='grarep';document.newAssignmentForm.submit();return false;">$!tlang.getString("gen.grarep")</a></span>
				</li>
			#end
			<li  role="menuitem">
				<span><a href="#" title="$!tlang.getString('gen.stuvie')" onclick="javascript:document.newAssignmentForm.onsubmit();document.getElementById('option').value='view';document.getElementById('view').value='stuvie';document.newAssignmentForm.submit();return false;">$!tlang.getString("gen.stuvie")</a></span>
			</li>				
		#end
		#if (($allowAllGroups) && ($assignmentscheck))
			<li  role="menuitem">		
				<span><a href="#toolLink("$action" "doReorder")" title="$tlang.getString('gen.reorder')">$tlang.getString('gen.reorder')</a></span>
			</li>
		#end
		#if ($allowUpdateSite)
			<li  role="menuitem">
				<span><a href="#" title="$tlang.getString('permis')" onclick="javascript:document.newAssignmentForm.onsubmit();document.getElementById('option').value='permissions';document.newAssignmentForm.submit();return false;">$tlang.getString('permis')</a></span>
			</li>	
		#end
	</ul>
	<h3>
		
	#if($validator.escapeHtml($!value_title) && $validator.escapeHtml($!value_title) !='')
			$validator.escapeHtml($!value_title) <span class="highlight">	$tlang.getString("edit")
	#else
		$tlang.getString("new.title")
	#end
	</h3>

<p class="instruction">
	$tlang.getString("newassig.comfor")			
</p>
	#if ($alertMessage)<div class="alertMessage" style="width:80%  !important">$tlang.getString("gen.alert") $validator.escapeHtml($alertMessage)</div><div style="display:block;clear:both"></div>#end
	<form name = "newAssignmentForm" action="#toolForm("AssignmentAction")" method="post" onsubmit="return true;">
		<input type="hidden" name="assignmentId" value="$!assignment.Reference" />
		<input type="hidden" name="assignmentContentId" value="$!assignment.ContentReference" />
		<input type="hidden" name="eventSubmit_doAssignment_form" value="" />
		<input type="hidden" name="option" id="option" value="" />
		<input type="hidden" name="view" id="view" value="" />
		<input type="hidden" name="$name_order" id="$name_order" value="$!value_position_order" />
		<h4>$tlang.getString("gen.assig")</h4>
		<p class="shorttext">
			<span class="reqStar">*</span>
			<label for="$name_title">
				$tlang.getString("gen.tit2")
			</label>	
			<input name="$name_title" id="$name_title" type="text" value="$validator.escapeHtml($!value_title)" size="30" maxlength="100" />
		</p>
			#* placeholder for sections 
				<p class="shorttext">
					<label for="sectSelect">
						$tlang.getString("gen.sect")
					</label>
					<select id="sectSelect" name="$name_Section" multiple="multiple" size = "3" onchange="blur()">
						#foreach ($i in ["001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "all"])
							#if ($value_Sections.indexOf($i)!=-1)
								<option value="$i" selected ="selected">$i</option>
							#else
								<option value="$i">$i</option>
							#end
						#end
					</select>
					<span class="instruction">
						$tlang.getString("newassig.tosel")
					</span>
				</p>	
			*#
		<p class="shorttext">
			<span class="reqStar">*</span>
			<label for="new_assignment_openmonth">
				$tlang.getString("newassig.opedat")
			</label>	
			#chef_dateselectionwidget($name_OpenYear $name_OpenMonth $name_OpenDay $!value_year_from $!value_year_to $value_OpenYear $value_OpenMonth $value_OpenDay)
			$tlang.getString("gen.at") 
			<select name="$name_OpenHour" id="$name_OpenHour">
				#foreach ($i in [1..12])
					#if ($value_OpenHour==$i)
						<option value="$i" selected="selected">$i</option>
					#else
						<option value="$i">$i</option>
					#end
				#end
			</select>
			<select name="$name_OpenMin" id="$name_OpenMin">
				#foreach ($i in [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55])
					<option value="$i" #if($i == $value_OpenMin)selected="selected"#end>#if($i ==0)00#elseif($i == 5)05#else$i#end</option>
				#end
			</select>
			<select name="$name_OpenAMPM" id="$name_OpenAMPM">
				#foreach ($i in ["AM", "PM"])
					#if ($i == $value_OpenAMPM)
						<option value="$i" selected="selected">$i</option>
					#else
							<option value="$i">$i</option>
					#end
				#end
			</select>
		</p>	
		<p class="instruction labelindnt">
			$tlang.getString("gen.stuwonsee")
		</p>
		<p class="shorttext">
			<span class="reqStar">*</span>
			<label for="new_assignment_duemonth">
				$tlang.getString("gen.duedat")
			</label>
			#chef_dateselectionwidget($name_DueYear $name_DueMonth $name_DueDay $!value_year_from $!value_year_to $value_DueYear $value_DueMonth $value_DueDay)
				$tlang.getString("gen.at") 
			<select name="$name_DueHour" id="$name_DueHour">
				#foreach ($i in [1..12])
					#if ($i == $value_DueHour)
						<option value="$i" selected="selected">$i</option>
					#else
						<option value="$i">$i</option>
					#end
				#end
			</select>
			<select name="$name_DueMin" id="$name_DueMin">
				#foreach ($i in [00, 05, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55])
					<option value="$i" #if($i == $value_DueMin)selected="selected"#end>#if($i ==0)00#elseif($i == 5)05#else$i#end</option>
				#end
			</select>
			<select name="$name_DueAMPM" id="$name_DueAMPM">
				#foreach ($i in ["AM", "PM"])
					#if ($i == $value_DueAMPM)
						<option value="$i" selected="selected">$i</option>
					#else
						<option value="$i">$i</option>
					#end
				#end
			</select>
		</p>
		<p class="shorttext">
			<span class="reqStar">*</span>
			<label for="new_assignment_closemonth">
				$tlang.getString("gen.acesubunt")
			</label>
			#if ($value_EnableCloseDate)
				#chef_dateselectionwidget($name_CloseYear $name_CloseMonth $name_CloseDay $!value_year_from $!value_year_to $value_CloseYear $value_CloseMonth $value_CloseDay)
				$tlang.getString("gen.at") 
				<select name="$name_CloseHour" id="$name_CloseHour">
					#foreach ($i in [1..12])
						#if ($i == $value_CloseHour)
							<option value="$i" selected="selected">$i</option>
						#else
							<option value="$i">$i</option>
						#end
					#end
				</select>
				<select name="$name_CloseMin" id="$name_CloseMin">
					#foreach ($i in [00, 05, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55])
						<option value="$i" #if($i == $value_CloseMin)selected="selected"#end>#if($i ==0)00#elseif($i == 5)05#else$i#end</option>
					#end
				</select>
				<select name="$name_CloseAMPM" id="$name_CloseAMPM">
					#foreach ($i in ["AM", "PM"])
						#if ($i == $value_CloseAMPM)
							<option value="$i" selected="selected">$i</option>
						#else
							<option value="$i">$i</option>
						#end
					#end
				</select>
			#else
				<select name="$name_CloseMonth" id="$name_CloseMonth" disabled="disabled">
					#foreach ($i in [1..12])
						#if ($i == $value_CloseMonth)
							<option value="$i" selected="selected">$monthTable.get($i)</option>
						#else
							<option value="$i">$monthTable.get($i)</option>
						#end
					#end
				</select>
				<select name="$name_CloseDay" id="$name_CloseDay" disabled="disabled">
					#foreach ($i in [1..31])
						#if ($i == $value_CloseDay)
							<option value="$i" selected="selected">$i</option>
						#else
							<option value="$i">$i</option>
						#end
					#end
				</select>
				<select name="$name_CloseYear" id="$name_CloseYear" disabled="disabled">
					#foreach ($i in [$!value_year_from..$!value_year_to])
						#if ($i == $value_CloseYear)
							<option value="$i" selected="selected">$i</option>
						#else
							<option value="$i">$i</option>
						#end
					#end
				</select>
				$tlang.getString("gen.at") 
				<select name="$name_CloseHour" id="$name_CloseHour" disabled="disabled">
					#foreach ($i in [1..12])
						#if ($i == $value_CloseHour)
							<option value="$i" selected="selected">$i</option>
						#else
							<option value="$i">$i</option>
						#end
					#end
				</select>
				<select name="$name_CloseMin" id="$name_CloseMin" disabled="disabled">
					#foreach ($i in [00, 05, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55])
						<option value="$i" #if($i == $value_CloseMin)selected="selected"#end>#if($i ==0)00#elseif($i == 5)05#else$i#end</option>
					#end
				</select>
				<select name="$name_CloseAMPM" id="$name_CloseAMPM" disabled="disabled">
					#foreach ($i in ["AM", "PM"])
						#if ($i == $value_CloseAMPM)
							<option value="$i" selected="selected">$i</option>
						#else
							<option value="$i">$i</option>
						#end
					#end
				</select>
			#end
		</p>	
		<p class="instruction labelindnt">
			$tlang.getString("gen.noasscan")
		</p>
		<p class="shorttext">
			<span class="reqStar">*</span>
			<label for="subType">
				$tlang.getString("gen.stusub")
			</label>
			<select name="$name_SubmissionType" id="subType">
				#foreach ($i in [1..$!value_totalSubmissionTypes])
					#if ($i == $value_SubmissionType)
						<option value="$i" selected="selected">$submissionTypeTable.get($i)</option>
					#else
						<option value="$i">$submissionTypeTable.get($i)</option>
					#end
				#end
			</select>
		</p>
#* comment out this option for 2.4 - will default to "0"
		<p class="shorttext">
			<label for="allowResubmitNumber">
				$tlang.getString("allow.resubmit.number")
			</label>
			<select name="$name_allowResubmitNumber" id="allowResubmitNumber">
				#foreach ($i in [-1..10])
					<option value="$i" #if($i==$!value_allowResubmitNumber)selected="selected"#end>
						#if($i==-1)
							$tlang.getString("allow.resubmit.number.unlimited")
						#else
							$i
						#end
					</option>
				#end
			</select>
		</p>
*#
		#if ($withGrade)
			<p class="shorttext">
				<span class="reqStar">*</span>
				<label for="$name_GradeType">
					$tlang.getString("gen.grasca")
				</label>
				<span class="skip">$tlang.getString("newassig.selectmessage")</span>				
				<select id="$name_GradeType"  name="$name_GradeType" onchange="SetMaxPoint(this, $name_GradePoints)">
					#foreach ($i in [1..5])
						#if ($i == $value_GradeType)
							<option value="$i" selected="selected">$gradeTypeTable.get($i)</option>
						#else
							<option value="$i">$gradeTypeTable.get($i)</option>
						#end
					#end
				</select>
			</p>
			<p class="labelindnt">
				## enable the maxfield when it is points grade type
				<span class="reqStar" style="display:none" id="req-$name_GradePoints">*</span>
				#if ($value_GradeType == 3)
					<input name="$name_GradePoints" id="$name_GradePoints" value="$!value_GradePoints" type="text" size="5" maxlength="11"/>
				#else
					<input name="$name_GradePoints" id="$name_GradePoints"  value="$!value_GradePoints" type="text" size="5" maxlength="11" disabled="disabled" style="background-color:#eee;border:1px solid gray"/>
				#end
				<label for="$name_GradePoints">$tlang.getString("gen.forpoi")</label>
			</p>	
		#end
			<div class="longtext">
				<label for="new_assignment_instructions" class="block">
					$tlang.getString("gen.assinf")
				</label>
				<table border="0" style="margin:0"><tr><td>
					<textarea name="$name_Description" id="$name_Description" cols="80" rows="30" wrap="virtual">$validator.escapeHtmlFormattedTextarea($value_Description)</textarea>
						#chef_setupformattedtextarea($name_Description)
					</td></tr></table>
			</div>
		#if ($!name_CheckAddDueDate)
				<p class="checkbox indnt2">
					#if ($value_CheckAddDueDate.equals("true"))
						<input id="$name_CheckAddDueDate" name="$name_CheckAddDueDate" type="checkbox" value="true" checked="checked" />
					#else
						<input id="$name_CheckAddDueDate" name="$name_CheckAddDueDate" type="checkbox" value="true" />
					#end
					<label for="$name_CheckAddDueDate">
						$tlang.getString("gen.addduedat")
					</label>
				</p>
			#end
			#if ($!name_CheckAutoAnnounce)
			<p class="checkbox  indnt2">
				#if ($value_CheckAutoAnnounce.equals("true"))
					<input id="$name_CheckAutoAnnounce" name="$name_CheckAutoAnnounce" type="checkbox" value="true" checked="checked" />
				#else
					<input id="$name_CheckAutoAnnounce" name="$name_CheckAutoAnnounce" type="checkbox" value="true" />
				#end
				<label for="$name_CheckAutoAnnounce">
					$tlang.getString("gen.anntheope") 
				</label>
			</p>
			#end
			<p class="checkbox  indnt2">
				#if (!$!value_CheckAddHonorPledge.equals("1"))
					<input id="$name_CheckAddHonorPledge" name="$name_CheckAddHonorPledge" type="checkbox" value="2" checked="checked" />
				#else
					<input id="$name_CheckAddHonorPledge" name="$name_CheckAddHonorPledge" type="checkbox" value="2" />
				#end
				<label for="$name_CheckAddHonorPledge">
					$tlang.getString("gen.addhonple")
				</label>
			</p>
			#if ($allowReviewService)
				<p style="display:block">
				<h4>
				$!tlang.getString('review.title')
				</h4>
					<div class="checkbox  indnt2">
						#if ($!value_UseReviewService.equals("true"))
							<input id="$name_UseReviewService" name="$name_UseReviewService" type="checkbox" value="true" checked="checked" />
						#else
							<input id="$name_UseReviewService" name="$name_UseReviewService" type="checkbox" value="true" />
						#end
						<label for="$name_UseReviewService">
							$tlang.getString("review.use") 
						</label>
					</div>
					<div class="checkbox  indnt2">
						#if ($!value_AllowStudentView.equals("true"))
							<input id="$name_AllowStudentView" name="$name_AllowStudentView" type="checkbox" value="true" checked="checked" />
						#else
							<input id="$name_AllowStudentView" name="$name_AllowStudentView" type="checkbox" value="true" />
						#end
						<label for="$name_AllowStudentView">
							$tlang.getString("review.allow") 
						</label>
					</div>
				</p>
			#end
			#if ($!withGrade && $!withGradebook)
				## show the "Add to Gradebook" choices or not
				#if(!$!allowGroupAssignmentsInGradebook)
					#set ($addToGBDisplay="none")
				#else
					#set ($addToGBDisplay="block")
				#end
					<h4>
						$!tlang.getString('grading')
					</h4>
					<p style="display:$!addToGBDisplay">
					<div class="checkbox  indnt2" style="display:$!addToGBDisplay">
						## hide the assignment list from Gradebook when clicked
						<input type="radio" name="$!name_Addtogradebook" id="$!gradebookChoice_no" value="$!gradebookChoice_no" #if($!gradebookChoice.equals("$!gradebookChoice_no"))checked#end onclick="if (document.getElementById('gradebookList')) document.getElementById('gradebookList').style.display = 'none';" >
						<label for="$!gradebookChoice_no">#if(!$!noAddToGradebookChoice)$tlang.getString("grading.no")#else$tlang.getString("grading.no2")#end</label>
						<br/>
						#if (!$!noAddToGradebookChoice)
							## hide the assignment list from Gradebook when clicked
							<input type="radio" name="$!name_Addtogradebook" id="$!gradebookChoice_add" value="$!gradebookChoice_add" #if($!gradebookChoice.equals("$!gradebookChoice_add"))checked#end onclick="if (document.getElementById('gradebookList')) document.getElementById('gradebookList').style.display = 'none';" >
							<label for="$!gradebookChoice_add">$tlang.getString("grading.add")</label>
							<br/>
						#end
						## if there exists properiate assignment entries in Gradebook
						#if ($!gradebookAssignments.size() > 0) 
							## show the assignment list from Gradebook when clicked
							<input type="radio" name="$!name_Addtogradebook" id="$!gradebookChoice_associate" value="$!gradebookChoice_associate" #if($!gradebookChoice.equals("$!gradebookChoice_associate"))checked#end onclick="if (document.getElementById('gradebookList')) document.getElementById('gradebookList').style.display = 'block';" >
							<label for="$!gradebookChoice_associate">$tlang.getString("grading.associate")</label>
						#end
					</div>
				</p>	
				## if there exists properiate assignment entries in Gradebook
				#if ($!gradebookAssignments.size() > 0) 
					## show the "Gradebook Assignment list" choices or not
					#if($!allowGroupAssignmentsInGradebook && $!gradebookChoice.equals("$!gradebookChoice_associate"))
						#set ($gbListDisplay="block")
					#else
						#set ($gbListDisplay="none")
					#end
					<p id="gradebookList" class="checkbox  indnt2" style="display:$gbListDisplay">
						<select name="$!name_AssociateGradebookAssignment" >
							<option  value="">$tlang.getString("grading.select")</option>
							#foreach ($aAssignment in $!gradebookAssignments)
								#if ($aAssignment.isExternallyMaintained())
									## for external assignment
									<option  value="$aAssignment.getExternalId()" #if($!associateGradebookAssignment.equals($aAssignment.getExternalId()))selected="selected"#end)>$aAssignment.Name</option>
								#else
									## for internal assignment
									<option  value="$aAssignment.Name" #if($!associateGradebookAssignment.equals($aAssignment.Name))selected="selected"#end)>$aAssignment.Name</option>
								#end
							#end
						</select>
					</p>
				#end
			#end
			## group/section support
			#if ($allowAddSiteAssignment)
				#if ($!groups)
					<h4>
						$!tlang.getString('access')
					</h4>
					<p class="checkbox  indnt2">
						#if (!$!allowGroupAssignmentsInGradebook)
							<input type="radio" name="range" id="site" value="site" #if($!range == "site")checked="checked"#end onclick="if (document.getElementById('addToGradebook') !=null){document.getElementById('addToGradebook').style.display = 'block'};document.getElementById('groupTable').style.display = 'none';" />
						#else
							<input type="radio" name="range" id="site" value="site" #if($!range == "site")checked="checked"#end onclick="document.getElementById('groupTable').style.display = 'none';" />
						#end
						<label for="site">$tlang.getString("displayto.site")</label>
					</p>	
				#else
					##if there is no group for the site, assignment is defaulted to site-range, and no need to surface the choice in UI
					<input type="hidden" name="range" id="site" value="site" />
				#end
			#elseif ($allowAddAssignment)
				<h4>
					$!tlang.getString('access')
				</h4>
				#if ($!groups.size() >1)
					<label for="$tlang.getString('groups')">$tlang.getString("groups")</label>
				#else
					<label for="$tlang.getString('group')">$tlang.getString("group")</label>
				#end
			#end
			#if ($!groups)
				## added group awareness
				<p class="checkbox indnt2">
					#if (!$!allowGroupAssignmentsInGradebook)
						<input type="radio" name="range" id="groups" value="groups" #if($!range == "groups")checked="checked"#end onclick="if (document.getElementById('addToGradebook') != null){document.getElementById('addToGradebook').style.display = 'none';document.getElementById('$!name_Addtogradebook').checked=false};document.getElementById('groupTable').style.display = 'block';document.getElementById('groupTable').style.width = '80%';"  />
					#else
						<input type="radio" name="range" id="groups" value="groups" #if($!range == "groups")checked="checked"#end onclick="document.getElementById('groupTable').style.display = 'block';document.getElementById('groupTable').style.width = '80%';"  />
					#end
					
					<label for="groups">$tlang.getString("displayto.selected")</label>
				</p>	
				#if($!range == "groups" || $!assignment.Access == $groupAccess)
					#set ($listDisplay="block")
				#else
					#set ($listDisplay="none")
				#end
				<table id="groupTable" style="width:80%;display:$listDisplay" class="listHier lines indnt3" border="0" cellpadding="0" cellspacing="0" summary="$tlang.getString('group.list.summary')">
						<tr>
							<th id ="selectAllGroups" style="width:2em;padding-left:.4em">
								<input type="checkbox" name="selectall" id="selectall" title="toggle select all" onclick="javascript:toggleSelectAll(this, 'selectedGroups')"  />
							</th>
					 		<th id ="groupname">
									$tlang.getString('group.list.title')
							</th>
							<th id ="groupdescription">
								$tlang.getString('group.list.descr')
							</th>
						</tr>
						#foreach ($group in $!groups)
							<tr>
								<td headers="selected" style="width:2em">
									#set($selected=false)
									#foreach($aGroupRef in $assignmentGroups)
										#set($aGroup = $!site.getGroup($!aGroupRef))
										#if ($!group.Id == $!aGroup.Id)
											#set($selected = true)
										#end
									#end
									<input type="checkbox" name="selectedGroups" id="id-$group.Id" title="$group.Id" value="$group.Id" #if($selected) checked="checked"#end />
								</td>
								<td headers="name" class="checkbox" style="white-space:nowrap">
									<label for="id-$group.Id">
										$validator.escapeHtml($group.Title)
									</label>	
								</td>
								<td headers="description" width="100%"> ##mozilla does not resize table children dynamically , so set here
									#set($description = "")
									#set($description = $group.Description)
									$!description
								</td>
							</tr>
						#end
					</table>
			#end
			## whether to show the instructor notification choices
			#if ($!name_assignment_instructor_notifications)
				<h4>
					$tlang.getString("receive.confirm.submission.email.options")
				</h4>
				<p class="checkbox  indnt2">
					<input type="radio" name="$!name_assignment_instructor_notifications" id="notsendnotif" value="$!value_assignment_instructor_notifications_none" #if($!value_assignment_instructor_notifications.equals($!value_assignment_instructor_notifications_none))checked="checked" #end />
					<label for="notsendnotif">$tlang.getString('receive.confirm.submission.email.none')</label>
					<br/>
					<input type="radio" name="$!name_assignment_instructor_notifications" id="sendnotif" value="$!value_assignment_instructor_notifications_each" #if($!value_assignment_instructor_notifications.equals($!value_assignment_instructor_notifications_each))checked="checked" #end />
					<label for="sendnotif">$tlang.getString('receive.confirm.submission.email.each')</label>
					<br/>
					<input type="radio" name="$!name_assignment_instructor_notifications" id="sendnotifsummary" value="$!value_assignment_instructor_notifications_digest" #if($!value_assignment_instructor_notifications.equals($!value_assignment_instructor_notifications_digest))checked="checked" #end />
					<label for="sendnotifsummary">$tlang.getString('receive.confirm.submission.email.digest')</label>
				</p>
			#end
			## attachments
			<h4>
				$tlang.getString("gen.addres")
			</h4>
			#set ($size = 0)
			#set ($props = false)
			#foreach ($attachment in $attachments) 
				#set ($props = $attachment.Properties) 
				#if ($!props)
					#set ($size = $size + 1)
				#end
			#end
			#if ($size == 0)
				<p class="instruction">$tlang.getString("gen.noatt")</p>

				<div class="act">
					<input type="button" name="attach" value="$tlang.getString('gen.addatt')" onclick="javascript:document.newAssignmentForm.onsubmit();document.getElementById('option').value='attach';document.newAssignmentForm.submit();return false;"/>
				</div>
			#else
				<ul class="attachList indnt1">
					#foreach ($attachment in $attachments) 
						#set ($props = false)
						#set ($props = $attachment.Properties) 
						#if ($!props)
							<li>
								#if ($props.getBooleanProperty($props.NamePropIsCollection))
									<img src = "#imageLink($contentTypeImageService.getContentTypeImage("folder"))" border="0" alt="$tlang.getString("gen.folatt")" />
								#else
									<img src = "#imageLink($contentTypeImageService.getContentTypeImage($props.getProperty($props.NamePropContentType)))" border="0" alt="$tlang.getString("gen.filatt")" />
								#end
								<a href="$attachment.Url" target="_blank">$validator.escapeHtml($props.getPropertyFormatted($props.NamePropDisplayName))</a>						
								#if (!$props.getBooleanProperty($props.NamePropIsCollection))
									($props.getPropertyFormatted($props.NamePropContentLength))
								#end
							</li>
						#end
					#end
				</ul>
				<div class="act">
					<input type="button" name="attach" value="$tlang.getString('gen.adddroatt2')" onclick="javascript:document.newAssignmentForm.onsubmit();document.getElementById('option').value='attach';document.newAssignmentForm.submit();return false;" />
				</div>
			#end	
		<h3 style="margin-bottom:0">Additional information</h3>
		

	<table class="listHier lines nolines" style="width:auto;" >
		<caption style="border-bottom:1px solid #ccc;text-align:left; margin-top:1em;padding-bottom:.3em">$tlang.getString("supplement")</caption>
		<tr>
			<td style="padding-right:5em">
				$tlang.getString("modelAnswer")
			</td>
			<td class="itemAction" style="white-space:nowrap">
				<div id="noModelAnswer" #if(!$!modelanswer) style="display:block"#else style="display:none" #end>
					<a id="modelanswer_add" href="#">$tlang.getString("new")</a>
				</div>
				<div id="hasModelAnswer" #if($!modelanswer) style="display:block"#else style="display:none" #end>
					<a id="modelanswer_edit" href="#">$tlang.getString("gen.revi")</a> | <a id="modelanswer_delete" href="#">$tlang.getString("delet")</a>
				</div>
			</td>
		</tr>
		<tr>
			<td style="padding-right:5em">
				$tlang.getString("note")
			</td>
			<td class="itemAction" style="white-space:nowrap">
				<div id="noNote" #if(!$!note) style="display:block"#else style="display:none" #end>
					<a id="note_add" href="#">$tlang.getString("new")</a>
				</div>
				<div id="hasNote" #if($!note) style="display:block"#else style="display:none" #end>
					<a id="note_edit" href="#">$tlang.getString("gen.revi")</a> | <a id="note_delete" href="#">$tlang.getString("delet")</a>
				</div>
			</td>
		</tr>
		<tr>
			<td style="padding-right:5em">
				$tlang.getString("allPurpose")
			</td>
			<td class="itemAction" style="white-space:nowrap">
				<div id="noAllPurpose" #if(!$!allPurpose) style="display:block"#else style="display:none" #end>
					<a id="allPurpose_add" href="#">$tlang.getString("new")</a>
				</div>
				<div id="hasAllPurpose" #if($!allPurpose) style="display:block"#else style="display:none" #end>
					<a id="allPurpose_edit" href="#">$tlang.getString("gen.revi")</a> | <a id="allPurpose_delete" href="#">$tlang.getString("delet")</a>
				</div>
			</td>
		</tr>
	</table>
</div>		
		
	#*	<p class="shorttext">
			<label for="selectExtra">
				Add item
			</label>
			<select id="selectExtra">
					<option value="1default"> --select one-- </option>
					<option value="modelanswer">Model Answer</option>
					<option value="gradingguidelines">Grading guidelines</option>
					<option value="assignotes">Private notes</option>
					<option value="otherextranodes">All purpose item</option>
			</select>
		</p>*#
		<fieldset class="extraNode" id="modelanswer">
				<legend>$tlang.getString("modelAnswer")</legend>
				<div class="longtext" style="margin:.2em">
					<label for="modeltext" class="block">
						<span class="reqStar">*</span>$tlang.getString("modelAnswer.instruction")
					</label>
					<textarea name="modelanswer_text" id="modelanswer_text" cols="60" rows="10" wrap="virtual">$!modelanswer_text</textarea>
					###chef_setupformattedtextareaparams("modeltext" "200" "365" "small") 
				</div>
		 #set ($size = 0)
			#set ($props = false)
			#foreach ($attachment in $modelanswer_attachments) 
				#set ($props = $attachment.Properties) 
				#if ($!props)
					#set ($size = $size + 1)
				#end
			#end
			#if ($size == 0)
				<p class="instruction">$tlang.getString("gen.noatt")</p>
			#else
				<ul class="attachList indnt1">
					#foreach ($attachment in $modelanswer_attachments) 
						#set ($props = false)
						#set ($props = $attachment.Properties) 
						#if ($!props)
							<li>
								#if ($props.getBooleanProperty($props.NamePropIsCollection))
									<img src = "#imageLink($contentTypeImageService.getContentTypeImage("folder"))" border="0" alt="$tlang.getString("gen.folatt")" />
								#else
									<img src = "#imageLink($contentTypeImageService.getContentTypeImage($props.getProperty($props.NamePropContentType)))" border="0" alt="$tlang.getString("gen.filatt")" />
								#end
								<a href="$attachment.Url" target="_blank">$validator.escapeHtml($props.getPropertyFormatted($props.NamePropDisplayName))</a>						
								#if (!$props.getBooleanProperty($props.NamePropIsCollection))
									($props.getPropertyFormatted($props.NamePropContentLength))
								#end
							</li>
						#end
					#end
				</ul>
			#end
				<div class="act">
					<input type="button" name="modelAnswerAttach" value="$tlang.getString('gen.addatt')" onclick="javascript:document.newAssignmentForm.onsubmit();document.getElementById('option').value='modelAnswerAttach';document.newAssignmentForm.submit();return false;"/>
				</div>

			<p class="longtext"  style="margin:.2em">
			<span class="reqStar">*</span>
				<label for="modelanswer_when" class="block">
					$tlang.getString("modelAnswer.show_to_student.prompt")
				</label>
				## show to student time option
				<select id="modelanswer_when" name="modelanswer_when">
					#foreach ($k in ["0", "1", "2", "3", "4"])
						#set($string = "modelAnswer.show_to_student.")
						#set($string = $string.concat($k))
						<option value="$k" #if($k.equals($!modelanswer_when))selected="selected"#end> $tlang.getString($string) </option>
					#end
				</select>
			</p>
			<p class="act">
				<input type="button" id="modelanswer_save" value="$tlang.getString('gen.sav')" class="active" />
				<input type="button" id="modelanswer_cancel" value="$tlang.getString('gen.can')" />
			</p>
		</fieldset>
		## the panel for grading guideline				
		#*<fieldset class="extraNode" id="gradingguidelines">
			<legend>Grading guidelines</legend>
			<div class="longtext" style="margin:.2em">
				<span class="reqStar">*</span>
				<label for="ggtext" class="block">
					Provide grading rationale. You can choose to whom and when this will display.
				</label>
					<textarea name="ggtext" id="ggtext" cols="60" rows="10" wrap="virtual"></textarea>
					###chef_setupformattedtextareaparams("ggtext" "200" "365" "small")					
			</div>
			<div class="act">
					<input type="button" name="attach" value="$tlang.getString('gen.addatt')" onclick="javascript:document.newAssignmentForm.onsubmit();document.getElementById('option').value='attach';document.newAssignmentForm.submit();return false;"/>
				</div>
			<p class="longtext"  style="margin:.2em">
				<span class="reqStar">*</span>
				<label for="ggwho" class="block">
					Show
				</label>
				<select id="ggwho">
					<option value="ggwhodefault"> --select one-- </option>
					<option value="ggwho1">Only to instructors</option>
					<option value="ggwho2">also to students (after grading)</option>
					<option value="ggwho3">also to students (after accept until date)</option>
				</select>
			</p>
			<p class="act">
				<input type="button" value="Save" class="active"/><input type="button" value="Cancel" />
			</p>
		</fieldset>	
		*#
		## the panel for private note			
		<fieldset class="extraNode" id="note">
			<legend>$tlang.getString("note")</legend>
			<div class="longtext" style="margin:.2em">
				<span class="reqStar">*</span>				
				<label for="note_text" class="block">
					$tlang.getString("note.instruction1")<br />$tlang.getString("note.instruction2") 
				</label>
					<textarea name="note_text" id="note_text" cols="60" rows="10" wrap="virtual">$!note_text</textarea>
					###chef_setupformattedtextareaparams("assigntext" "200" "365" "small")
			</div>
			<p class="longtext"  style="margin:.2em">
				<span class="reqStar">*</span>				
				<label for="noteTo" class="block">
					Share
				</label>
				<select id="note_to" name="note_to">
					#foreach ($k in ["0", "1", "2", "3"])
						#set($string = "note.to.")
						#set($string = $string.concat($k))
						<option value="$k" #if($k.equals($!note_to)) selected="selected" #end> $tlang.getString($string) </option>
					#end
				</select>
			</p>
			<p class="act">
				<input type="button" id="note_save" value="$tlang.getString('gen.sav')" class="active" />
				<input type="button" id="note_cancel" value="$tlang.getString('gen.can')" />
			</p>
		</fieldset>			
		## the panel for allPurpose type of object			
		<fieldset class="extraNode" id="allPurpose">
			<legend>$tlang.getString('allPurpose')</legend>
			<div class="shorttext" style="margin:.2em">
				<span class="reqStar">*</span>				
				<label  for="allPurposeTitle">$tlang.getString("allPurpose.title")</label>
				<input id="allPurposeTitle" name="allPurposeTitle" type="text" size="20" maxlength="30" value="$!value_allPurposeTitle" />
			</div>	
			<div class="longtext" style="margin:.2em">
				<span class="reqStar">*</span>
				<label for="allPurposeText" class="block">
					$tlang.getString("allPurpose.instruction")
				</label>
					<textarea name="allPurposeText" id="allPurposeText" cols="60" rows="10" wrap="virtual">$!value_allPurposeText</textarea>
					###chef_setupformattedtextareaparams("otherextranodestext" "200" "365" "small")
			</div>
       <table>
            <tr>
                <td>
                    <input name="allPurposeHide" id="allPurposeHide" value="false" #if(!$!value_allPurposeHide)checked="checked"#end type="radio" />
                </td>
                <td colspan="4">
                    <label for="hidden_false_0">
                        $tlang.getString("allPurpose.show")
                    </label>
                </td>
            </tr>
            <tr>
                <td>
                </td>
                <td>
                    <input name="allPurposeReleaseDate" id="allPurposeReleaseDate" value="true" type="checkbox">
                </td>
                <td colspan="3">
                    <label for="use_start_date_0">
                        $tlang.getString("allPurpose.show.from")
                    </label>
                </td>
            </tr>
            <tr>
                <td>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td>
                    <label for="allPurposeReleaseYear">
                        $tlang.getString("allPurpose.show.date")
                    </label>
                </td>
                <td>
                    <label for="allPurposeReleaseHour">
                        $tlang.getString("allPurpose.show.time")
                    </label>
                </td>
            </tr>
            <tr>
                <td>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td>
                    #chef_dateselectionwidget("allPurposeReleaseYear" "allPurposeReleaseMonth" "allPurposeReleaseDay" $!value_year_from $!value_year_to $value_allPurposeReleaseYear $value_allPurposeReleaseMonth $value_allPurposeReleaseDay)
                </td>
                <td>
                    <select name="allPurposeReleaseHour" id="allPurposeReleaseHour">
                    	#foreach ($i in [1..12])
																						<option value="$i" #if ($value_allPurposeReleaseHour==$i)selected="selected"#end>$i</option>
																					#end
                    </select>
                    <select name="allPurposeReleaseMin" id="allPurposeReleaseMin">
                    			#foreach ($i in [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55])
																								<option value="$i" #if($i == $value_allPurposeReleaseMin)selected="selected"#end>#if($i ==0)00#elseif($i == 5)05#else$i#end</option>
																							#end
                    </select>
                    <select name="allPurposeReleaseAMPM" id="allPurposeReleaseHourAMPM">
                    	#foreach ($i in [0, 1])
																						<option value="$i" #if($i == $value_allPurposeReleaseAMPM)selected="selected"#end>#if($i==0) AM #else PM #end</option>
																					#end
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                </td>
                <td>
                    <input name="allPurposeRetractDate" id="allPurposeRetractDate" value="true" type="checkbox">
                </td>
                <td colspan="4">
                    <label for="allPurposeRetractDate">
                        $tlang.getString("allPurpose.show.util")
                    </label>
                </td>
            </tr>
            <tr>
                <td>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td>
                    <label for="allPurposeRetractYear">
                        $tlang.getString("allPurpose.show.date")
                    </label>
                </td>
                <td>
                    <label for="allPurposeRetractHour">
                        $tlang.getString("allPurpose.show.time")
                    </label>
                </td>
            </tr>
            <tr>
                <td>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td>
                	#chef_dateselectionwidget("allPurposeRetractYear" "allPurposeRetractMonth" "allPurposeRetractDay" $!value_year_from $!value_year_to $value_allPurposeRetractYear $value_allPurposeRetractMonth $value_allPurposeRetractDay)    
                </td>
                <td>
                    <select name="allPurposeRetractHour" id="allPurposeRetractHour">
                     #foreach ($i in [1..12])
																						<option value="$i" #if ($value_allPurposeRetractHour==$i)selected="selected"#end>$i</option>
																					#end
                    </select>
                    <select name="allPurposeRetractMin" id="allPurposeRetractMin">
                    			#foreach ($i in [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55])
																								<option value="$i" #if($i == $value_allPurposeRetractMin)selected="selected"#end>#if($i ==0)00#elseif($i == 5)05#else$i#end</option>
																							#end
                    </select>
                    <select name="allPurposeRetractAMPM" id="allPurposeRetractHourAMPM">
                    	#foreach ($i in [0, 1])
																						<option value="$i" #if($i == $value_allPurposeRetractAMPM)selected="selected"#end>#if($i==0) AM #else PM #end </option>
																					#end
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <input name="allPurposeHide" id="allPurposeHide" value="true" #if($!value_allPurposeHide)checked="checked"#end type="radio" />
                </td>
                <td colspan="4">
                    <label for="hidden_true_0">
                        $tlang.getString("allPurpose.show.hide")
                    </label>
                </td>
            </tr>
            <tr>
            	<td colspan="2">
																#set ($size = 0)
																#set ($props = false)
																#foreach ($attachment in $allPurpose_attachments) 
																	#set ($props = $attachment.Properties) 
																	#if ($!props)
																	 #set ($size = $size + 1)
														 		#end
														  #end
														  #if ($size == 0)
														  	<p class="instruction">$tlang.getString("gen.noatt")</p>
														  #else
															  <ul class="attachList indnt1">
																  #foreach ($attachment in $allPurpose_attachments) 
																	  #set ($props = false)
																	  #set ($props = $attachment.Properties) 
																	  #if ($!props)
																		  <li>
																			  #if ($props.getBooleanProperty($props.NamePropIsCollection))
																				  <img src = "#imageLink($contentTypeImageService.getContentTypeImage("folder"))" border="0" alt="$tlang.getString("gen.folatt")" />
																			  #else
																				  <img src = "#imageLink($contentTypeImageService.getContentTypeImage($props.getProperty($props.NamePropContentType)))" border="0" alt="$tlang.getString("gen.filatt")" />
																			  #end
																			  <a href="$attachment.Url" target="_blank">$validator.escapeHtml($props.getPropertyFormatted($props.NamePropDisplayName))</a>						
																			  #if (!$props.getBooleanProperty($props.NamePropIsCollection))
																				  ($props.getPropertyFormatted($props.NamePropContentLength))
																			  #end
																		  </li>
																	  #end
																  #end
															  </ul>
														  #end
															  <div class="act">
																  <input type="button" name="modelAnswerAttach" value="$tlang.getString('gen.addatt')" onclick="javascript:document.newAssignmentForm.onsubmit();document.getElementById('option').value='allPurposeAttach';document.newAssignmentForm.submit();return false;"/>
															  </div>
													</td>
            </tr>
        </table>
			</p>
			<h4>$tlang.getString("allPurpose.show.to")</h4>
			<table border="0" cellpadding="0" cellspacing="0" style="margin:1em 0;width:100%">
			    <tbody>
			    			#foreach ($role in $!roleUsers.keys())
			    				#set($allString=$tlang.getString("allPurpose.show.all").concat(" ").concat($role))
			    				#set($expandString=$tlang.getString("allPurpose.show.expand").concat(" ").concat($role).concat($tlang.getString("allPurpose.show.list")))
			    				#set($collapseString=$tlang.getString("allPurpose.show.collapse").concat(" ").concat($role).concat($tlang.getString("allPurpose.show.list")))
			        ###set($roleUserLabel="allPurposeUser".concat($role))
			        <tr>
			            <td>
			                <input id="$role" type="checkbox" name="$role" onclick="javascript:toggleSelectAll(this, '$roleUserLabel')"/>
			                <label for="$allString">
			                    $allString
			                </label>
			                <a href="#" id="$expandString" style="display:block;clear:both;text-decoration: underline">$expandString</a><a href="#" id="$collapseString" style="display:none;clear:both;text-decoration: underline">$collapseString</a>
																					<table class=".roleList" cellpadding="0" cellspacing="0" style="margin-left:2em;width:auto;font-weight:normal">
			                    <tbody>
			                        #foreach($user in $!roleUsers.get($role))
			                        <tr>
			                            <td class="attach">
			                                <input id="allPursposeUser" type="checkbox" name="$roleUserLabel" value="$user.Id"/>
			                            </td>
			                            <td class="">
			                                <label for="allPurposeUser" style="white-space:nowrap">
			                                   $user.getDisplayName()
			                                </label>
			                            </td>
			                        </tr>
			                        #end
			                    </tbody>
			                </table>
			            </td>
			        </tr>
			        #end
			    </tbody>
			</table>
			<p class="act">
				<input type="button" id="allPurpose_save" value="Save" class="active"/>
				<input type="button" id ="allPurpose_cancel" value="Cancel" />
			</p>
		</fieldset>
			<div class="act">
				<input accesskey ="s" type="button" class="active" name="post" value="$tlang.getString("gen.pos")" 
						onclick="javascript:document.newAssignmentForm.onsubmit();showNotif('submitnotif','post','newAssignmentForm');document.getElementById('option').value='post';document.newAssignmentForm.submit();return false;" />
				<input accesskey ="v" type="button" name="preview" value="$tlang.getString("gen.pre")" 
						onclick="javascript:document.newAssignmentForm.onsubmit();showNotif('submitnotif','preview','newAssignmentForm');document.getElementById('option').value='preview';document.newAssignmentForm.submit();return false;" />
				#if (!($!assignment && !$assignment.draft))
					<input accesskey ="d" type="button" name="save" value="$tlang.getString("gen.savdra")" 
							onclick="javascript:document.newAssignmentForm.onsubmit();showNotif('submitnotif','save','newAssignmentForm');document.getElementById('option').value='save';document.newAssignmentForm.submit();return false;" />
				#end
				<input accesskey ="x" type="button" name="cancel" value="$tlang.getString("gen.can")" 
							onclick="javascript:document.newAssignmentForm.onsubmit();document.getElementById('option').value='canceledit';document.newAssignmentForm.submit();return false;" />
				<span id="submitnotif" style="visibility:hidden">$tlang.getString("gen.proces")</span>
			</div>
	</form>
</div>
<script language="JavaScript" type="text/JavaScript">
	<!--
		function toggleSelectAll(caller, elementName)
		{
			var newValue = caller.checked;
			var elements = document.getElementsByName(elementName);
			
			if(elements)
			{
				for(var i = 0; i < elements.length; i++)
				{
					elements[i].checked = newValue;
				}
			}
		}
	-->
</script>
