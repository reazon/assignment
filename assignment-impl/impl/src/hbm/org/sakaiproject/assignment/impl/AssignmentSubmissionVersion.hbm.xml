<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="org.sakaiproject.assignment.model.AssignmentSubmissionVersion" table="SUBMISSION_VERSION_T">
       
        <id name="id" column="SUBMISSION_VERSION_ID" type="long">
					<generator class="native">
						<param name="sequence">SUBMISSION_VERSION_S</param>
					</generator>
				</id>
				
				<version name="hibernateVersion" type="integer" column="VERSION"/>
        
        <!--  This maps to the SUBMISSION_T table -->
        <many-to-one name="assignmentSubmission" column="SUBMISSION_ID"
        	class="org.sakaiproject.assignment.model.AssignmentSubmission"
        	not-null="true" lazy="false" index="SUB_VERSION_SUB_I" />
        <!-- the time of submission -->
        <property name="submittedTime" type="java.util.Date">
            <column name="SUBMITTED_TIME" not-null="false" />
        </property>
        <!-- the time feedback for this version was released to submitter -->
        <property name="releasedTime" type="java.util.Date">
            <column name="RELEASED_TIME" not-null="false" />
        </property>
        <!-- the inline text for this submission -->
        <property name="submittedText" type="text">
        	<column name="SUBMITTED_TEXT" not-null="false" />
        </property>
        <!-- the submitted text with grader annotation -->
        <property name="feedbackText" type="text">
        	<column name="FEEDBACK_TEXT" not-null="false" />
        </property>
        <!-- the grader's additional comments -->
        <property name="feedbackComment" type="text">
            <column name="FEEDBACK_COMMENT" not-null="false" />
        </property>
        
        <!-- draft status for this submission -->
        <property name="draft" type="java.lang.Boolean">
            <column name="DRAFT" not-null="true" />
        </property>
        <!-- is this submission been returned -->
        <property name="returned" type="java.lang.Boolean">
            <column name="RETURNED" not-null="true" />
        </property>
        <!-- the honor pldege setting -->
        <property name="honorPledgeFlag" type="java.lang.Boolean">
            <column name="HONORPLDEGE_FLAG" not-null="true" />
        </property>
        <!-- url for review service report url -->
        <property name="reviewReportUrl" type="java.lang.String">
            <column name="REVIEW_REPORT_URL" length="255" />
        </property>
        <!-- score from review service -->
        <property name="reviewScore" type="int">
            <column name="REVIEW_SCORE" />
        </property>
        <!-- review report status -->
        <property name="reviewStatus" type="java.lang.String">
            <column name="REVIEW_STATUS" length="255" />
        </property>
        <!-- review report icon url -->
        <property name="reviewIconUrl" type="java.lang.String">
            <column name="REVIEW_ICON_URL" length="255" />
        </property>
        <!-- version created by -->
        <property name="createdBy" type="java.lang.String">
            <column name="CREATED_BY" length="99" not-null="true" />
        </property>
        <!-- version created time -->
        <property name="createdTime" type="java.util.Date">
            <column name="CREATED_TIME" not-null="true" />
        </property>
        <!-- version modified by -->
        <property name="lastModifiedBy" type="java.lang.String">
            <column name="MODIFIED_BY" length="99" />
        </property>
        <!-- version modified time -->
        <property name="lastModifiedTime" type="java.util.Date">
            <column name="MODIFIED_TIME" />
        </property>
        
        <set name="submissionAttachSet" lazy="true" where="SUB_ATTACH_TYPE = 'S'" cascade="none">
	        <key column="SUBMISSION_VERSION_ID"/>                        
	        <one-to-many class="org.sakaiproject.assignment.model.SubmissionAttachment"/>            
    		</set>
    		
    		<set name="feedbackAttachSet" lazy="true" where="SUB_ATTACH_TYPE = 'F'" cascade="none">
	        <key column="SUBMISSION_VERSION_ID"/>                        
	        <one-to-many class="org.sakaiproject.assignment.model.FeedbackAttachment"/>            
    		</set>
              
    </class>

</hibernate-mapping>